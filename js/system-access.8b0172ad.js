(window.webpackJsonp=window.webpackJsonp||[]).push([["system-access","dynamic-table","iconfont","iconfont-icon-font"],{1016:function(e,t,n){"use strict";n.r(t);var r=n("6c0e");n.d(t,"DynamicTable",(function(){return r.default}))},2750:function(e,t,n){"use strict";n("6563")},"3c7f":function(e,t,n){"use strict";var r=n("7a23"),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},a=n("b3f0");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({},e,t.attrs);return r.createVNode(a.a,r.mergeProps(n,{icon:o}),null)};l.displayName="QuestionCircleOutlined",l.inheritAttrs=!1,t.a=l},"5e89":function(e,t,n){var r=n("861d"),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},"5f9a":function(e,t,n){"use strict";n.r(t);var r,o=n("7a23"),a=Object(o.createTextVNode)(" 添加 "),c=Object(o.createTextVNode)(" 删除 "),l=n("5530"),u=n("1da1"),i=(n("cd17"),n("ed3b")),d=(n("96cf"),n("d3b7"),n("25f0"),n("3c7f")),s=n("1016"),f=(n("a15b"),n("a526")),b=n("3bb8");function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.request({url:r.adminAccessModule,method:b.b.GET,params:e})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.request({url:r.adminAccess,method:b.b.GET,params:e})}function O(e){return f.a.request({url:[r.adminAccess,e].join("/"),method:b.b.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f.a.request({url:[r.adminAccess,e].join("/"),method:b.b.PATCH,params:t},{isShowErrorMessage:!0,successMessageText:"修改成功"})}function j(e){return f.a.request({url:r.adminAccess,method:b.b.POST,params:e},{isShowErrorMessage:!0,successMessageText:"创建成功"})}!function(e){e.adminAccess="/admin/access",e.adminAccessModule="/admin/access/module"}(r||(r={})),n("8ba4"),n("a9e3");var y=Object(o.withScopeId)("data-v-12fdd11d");Object(o.pushScopeId)("data-v-12fdd11d");var g=Object(o.createTextVNode)(" 模块 "),h=Object(o.createTextVNode)(" 菜单 "),w=Object(o.createTextVNode)(" 否 "),N=Object(o.createTextVNode)(" 是 ");Object(o.popScopeId)();var x,k=y((function(e,t,n,r,a,c){var l=Object(o.resolveComponent)("a-select-option"),u=Object(o.resolveComponent)("a-select"),i=Object(o.resolveComponent)("a-form-item"),d=Object(o.resolveComponent)("a-input"),s=Object(o.resolveComponent)("a-input-number"),f=Object(o.resolveComponent)("a-form"),b=Object(o.resolveComponent)("a-modal");return Object(o.openBlock)(),Object(o.createBlock)(b,{visible:e.visible,"onUpdate:visible":t[9]||(t[9]=function(t){return e.visible=t}),title:Number.isInteger(e.fields.id)?"编辑资源":"新增资源","confirm-loading":e.confirmLoading,"after-close":e.remove,onOk:e.handleOk},{default:y((function(){return[Object(o.createVNode)(f,{ref:"formRef",model:e.modelRef,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:y((function(){return[Object(o.createVNode)(i,{label:"类别",rules:e.rules.type,name:"type"},{default:y((function(){return[Object(o.createVNode)(u,{value:e.modelRef.type,"onUpdate:value":t[1]||(t[1]=function(t){return e.modelRef.type=t}),disabled:Number.isInteger(e.fields.id),placeholder:"请选择类型"},{default:y((function(){return[Object(o.createVNode)(l,{value:1},{default:y((function(){return[g]})),_:1}),Object(o.createVNode)(l,{value:2},{default:y((function(){return[h]})),_:1})]})),_:1},8,["value","disabled"])]})),_:1},8,["rules"]),1==e.modelRef.type?(Object(o.openBlock)(),Object(o.createBlock)(i,{key:0,label:"模块名称",rules:e.rules.moduleName,name:"moduleName"},{default:y((function(){return[Object(o.createVNode)(d,{value:e.modelRef.moduleName,"onUpdate:value":t[2]||(t[2]=function(t){return e.modelRef.moduleName=t}),disabled:Number.isInteger(e.fields.id),placeholder:"请输入模块名称"},null,8,["value","disabled"])]})),_:1},8,["rules"])):Object(o.createCommentVNode)("",!0),2==e.modelRef.type?(Object(o.openBlock)(),Object(o.createBlock)(i,{key:1,label:"模块名称",rules:e.rules.moduleId,name:"moduleId"},{default:y((function(){return[Object(o.createVNode)(u,{value:e.modelRef.moduleId,"onUpdate:value":t[3]||(t[3]=function(t){return e.modelRef.moduleId=t}),disabled:Number.isInteger(e.fields.id),placeholder:"请选择模块"},{default:y((function(){return[(Object(o.openBlock)(!0),Object(o.createBlock)(o.Fragment,null,Object(o.renderList)(e.moduleList,(function(e){return Object(o.openBlock)(),Object(o.createBlock)(l,{key:e.id,value:e.id},{default:y((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.moduleName),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value","disabled"])]})),_:1},8,["rules"])):Object(o.createCommentVNode)("",!0),2==e.modelRef.type?(Object(o.openBlock)(),Object(o.createBlock)(i,{key:2,label:"菜单名称",rules:e.rules.actionName,name:"actionName"},{default:y((function(){return[Object(o.createVNode)(d,{value:e.modelRef.actionName,"onUpdate:value":t[4]||(t[4]=function(t){return e.modelRef.actionName=t}),placeholder:"请输入菜单名称"},null,8,["value"])]})),_:1},8,["rules"])):Object(o.createCommentVNode)("",!0),Object(o.createVNode)(i,{label:"路径",rules:e.rules.url,name:"url"},{default:y((function(){return[Object(o.createVNode)(d,{value:e.modelRef.url,"onUpdate:value":t[5]||(t[5]=function(t){return e.modelRef.url=t}),placeholder:"请输入路径"},null,8,["value"])]})),_:1},8,["rules"]),Object(o.createVNode)(i,{label:"小图标"},{default:y((function(){return[Object(o.createVNode)(d,{value:e.modelRef.icon,"onUpdate:value":t[6]||(t[6]=function(t){return e.modelRef.icon=t}),placeholder:"小图标"},null,8,["value"]),Object(o.createVNode)("a",{href:"".concat(e.prefix,"#/icons"),target:"_blank"},"可选图标",8,["href"])]})),_:1}),Object(o.createVNode)(i,{label:"排序"},{default:y((function(){return[Object(o.createVNode)(s,{value:e.modelRef.sort,"onUpdate:value":t[7]||(t[7]=function(t){return e.modelRef.sort=t}),min:1,placeholder:"排序"},null,8,["value"])]})),_:1}),Object(o.createVNode)(i,{label:"keepAlive",name:"keepAlive"},{default:y((function(){return[Object(o.createVNode)(u,{value:e.modelRef.keepAlive,"onUpdate:value":t[8]||(t[8]=function(t){return e.modelRef.keepAlive=t}),placeholder:"是否缓存页面"},{default:y((function(){return[Object(o.createVNode)(l,{value:0},{default:y((function(){return[w]})),_:1}),Object(o.createVNode)(l,{value:1},{default:y((function(){return[N]})),_:1})]})),_:1},8,["value"])]})),_:1})]})),_:1},8,["model","label-col","wrapper-col"])]})),_:1},8,["visible","title","confirm-loading","after-close","onOk"])})),R=n("ade3"),V=(n("2ef0"),n("9839")),S=(n("5704"),n("b558")),C=(n("922d"),n("09d9")),I=(n("f2ef"),n("3af3")),A=(n("b0c0"),n("159b"),n("b64b"),Object(o.defineComponent)({name:"AddModal",components:(x={},Object(R.a)(x,i.a.name,i.a),Object(R.a)(x,I.a.name,I.a),Object(R.a)(x,I.a.Item.name,I.a.Item),Object(R.a)(x,C.a.name,C.a),Object(R.a)(x,S.a.name,S.a),Object(R.a)(x,V.b.name,V.b),Object(R.a)(x,"ASelectOption",V.b.Option),x),props:{remove:{type:Function},fields:{type:Object,default:function(){return{}}},callback:{type:Function}},setup:function(e){var t=Object(o.ref)(null),n=Object(o.reactive)({visible:!0,confirmLoading:!1,moduleList:[]}),r=Object(o.reactive)({moduleName:"",moduleId:void 0,actionName:"",type:void 0,url:"",icon:"",sort:1,keepAlive:1});return e.fields.moduleId&&(Object.keys(r).forEach((function(t){return r[t]=e.fields[t]})),r.type=-1==e.fields.moduleId?1:2),Object(o.onMounted)(Object(u.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:n.moduleList=e.sent;case 3:case"end":return e.stop()}}),e)})))),Object(l.a)(Object(l.a)({},Object(o.toRefs)(n)),{},{formRef:t,rules:{moduleName:[{required:!0,message:"模块名称不能为空"}],moduleId:[{required:!0,message:"模块名称不能为空"}],actionName:[{required:!0,message:"请输入菜单名称"}],type:[{required:!0,message:"请选择类型"}],url:[{required:!0,message:"请输入url地址"}]},prefix:"/vue3-antd-admin/",labelCol:{span:6},wrapperCol:{span:18},modelRef:r,handleOk:function(a){a.preventDefault(),n.confirmLoading=!0,t.value.validate().then(Object(u.a)(regeneratorRuntime.mark((function t(){var a,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.fields.id,c=Object(o.toRaw)(r),a&&delete c.type,t.next=5,(a?v(a,c):j(c)).finally((function(){return n.confirmLoading=!1}));case 5:n.visible=!1,e.callback&&e.callback();case 7:case"end":return t.stop()}}),t)})))).catch((function(e){n.confirmLoading=!1}))}})}}));A.render=k,A.__scopeId="data-v-12fdd11d";var B,T=A,_=(n("3b18"),n("f64c")),P=n("7996"),E=n("48b8"),D=n("7d88"),M=[{title:"名称",dataIndex:"moduleName",slots:{customRender:"moduleName"}},{title:"url地址",dataIndex:"url"},{title:"icon图标",dataIndex:"icon",slots:{customRender:"icon"},slotsType:"component",slotsFunc:function(e){return Object(o.createVNode)(D.IconFont,{type:e.icon})}},{title:"排序",dataIndex:"sort"},{title:"创建时间",dataIndex:"createdAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:function(e){return Object(E.b)(e)}},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:function(e){return Object(E.b)(e)}},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:(B=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.record).id<6)){e.next=3;break}return e.abrupt("return",_.a.warn("系统预置菜单，不能删除！"));case 3:return e.next=5,O(r.id).then((function(){return n()}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return B.apply(this,arguments)})},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:function(e,t){var n=e.record;return Object(P.a)(T,{fields:n,callback:t})}}]}],U=n("9720"),L=Object(o.defineComponent)({name:"SystemAccess",components:{DynamicTable:s.DynamicTable},setup:function(){var e=Object(o.ref)(null),t=Object(o.reactive)({itemRefs:{},expandedRowKeys:[],tableLoading:!1,rowSelection:{onChange:function(e,n){t.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),n=Object(o.computed)((function(){return 0==t.rowSelection.selectedRowKeys.length})),r=function(){var e=Object(u.a)(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.itemRefs[r.id],e.next=3,Object(U.useExpandLoading)({expanded:n,record:r,expandItemEl:o,asyncFunc:p,params:{id:r.id,limit:100}});case 3:null!=(a=e.sent)&&a.data&&(r.children=a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(l.a)(Object(l.a)({},Object(o.toRefs)(t)),{},{columns:M,tableRef:e,isDisabled:n,expand:r,getAdminAccess:p,addItem:function(){Object(P.a)(T,{callback:function(){e.value.refreshTableData()}})},deleteItems:function(){var n;i.a.confirm({title:"提示",icon:Object(o.createVNode)(d.a),content:"您确定要删除所有选中吗？",onOk:(n=Object(u.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O(t.rowSelection.selectedRowKeys.toString());case 2:return n.next=4,e.value.refreshTableData();case 4:t.rowSelection.selectedRowKeys=[];case 5:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)})})}})}});n("2750"),L.render=function(e,t,n,r,l,u){var i=Object(o.resolveComponent)("a-button"),d=Object(o.resolveComponent)("dynamic-table"),s=Object(o.resolveDirective)("permission");return Object(o.openBlock)(),Object(o.createBlock)(d,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminAccess,"row-key":"id","row-selection":e.rowSelection,onExpand:e.expand},{title:Object(o.withCtx)((function(){return[Object(o.withDirectives)(Object(o.createVNode)(i,{type:"primary",onClick:e.addItem},{default:Object(o.withCtx)((function(){return[a]})),_:1},8,["onClick"]),[[s,{action:"create",effect:"disabled"}]]),Object(o.withDirectives)(Object(o.createVNode)(i,{disabled:e.isDisabled,type:"primary",onClick:e.deleteItems},{default:Object(o.withCtx)((function(){return[c]})),_:1},8,["disabled","onClick"]),[[s,{action:"delete"}]])]})),moduleName:Object(o.withCtx)((function(t){var n=t.record;return[Object(o.createVNode)("span",{ref:function(t){return e.itemRefs[n.id]=t}},Object(o.toDisplayString)(n.moduleName||n.actionName),513)]})),_:1},8,["columns","get-list-func","row-selection","onExpand"])},t.default=L},6563:function(e,t,n){},"7d88":function(e,t,n){"use strict";n.r(t);var r=n("f9cc");n.d(t,"IconFont",(function(){return r.default}))},"8ba4":function(e,t,n){n("23e7")({target:"Number",stat:!0},{isInteger:n("5e89")})},f9cc:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=(n("a9e3"),n("2adb"));function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e,t){var n=t.attrs,l=t.slots,u=a({},e,n),i=u.class,d=u.component,s=u.viewBox,f=u.spin,b=u.rotate,m=u.tabindex,p=u.onClick,O=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(u,["class","component","viewBox","spin","rotate","tabindex","onClick"]),v=l.default&&l.default(),j=v&&v.length,y=l.component;Object(o.g)(Boolean(d||j||y),"Should have `component` prop/slot or `children`."),Object(o.f)();var g=c({anticon:!0},i,i),h={"anticon-spin":""===f||!!f},w=b?{msTransform:"rotate(".concat(b,"deg)"),transform:"rotate(".concat(b,"deg)")}:void 0,N=a({},o.e,{viewBox:s,class:h,style:w});s||delete N.viewBox;var x=m;return void 0===x&&p&&(x=-1,O.tabindex=x),r.createVNode("span",r.mergeProps(O,{role:"img",onClick:p,class:g}),[d?r.createVNode(d,N,{default:function(){return[v]}}):y?y(N):j?(Object(o.g)(Boolean(s)||1===v.length&&v[0]&&"use"===v[0].type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),r.createVNode("svg",r.mergeProps(N,{viewBox:s}),[v])):null])};l.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String},l.inheritAttrs=!1,l.displayName="Icon";var u=l;function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var f=new Set;function b(e){return"string"==typeof e&&e.length&&!f.has(e)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];if(b(n)){var r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("data-namespace",n),e.length>t+1&&(r.onload=function(){m(e,t+1)},r.onerror=function(){m(e,t+1)}),f.add(n),document.body.appendChild(r)}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scriptUrl,n=e.extraCommonProps,o=void 0===n?{}:n;"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(t)?m(t.reverse()):m([t]));var a=function(e,t){var n=t.attrs,a=t.slots,c=i({},e,n),l=c.type,d=s(c,["type"]),f=a.default&&a.default(),b=null;l&&(b=r.createVNode("use",{"xlink:href":"#".concat(l)},null)),f&&f.length&&(b=f);var m=i({},o,d);return r.createVNode(u,m,{default:function(){return[b]}})};return a.props={spin:Boolean,rotate:Number,type:String},a.inheritAttrs=!1,a.displayName="Iconfont",a}var O=n("55ac"),v=p({scriptUrl:""});t.default=Object(r.defineComponent)({name:"IconFont",props:{type:{type:String,default:""},color:{type:String,default:"unset"},size:{type:[Number,String],default:14},scriptUrl:{type:String,default:""}},setup:function(e,t){var n=t.attrs;e.scriptUrl&&(v=p({scriptUrl:e.scriptUrl}));var o=Object(r.computed)((function(){var t=e.color,n=e.size,r=Object(O.c)(n)?parseFloat(n):n;return{color:t,fontSize:"".concat(r,"px")}}));return function(){return Object(r.createVNode)(v,Object(r.mergeProps)({type:e.type||""},n,{style:Object(r.unref)(o)}),null)}}})}}]);